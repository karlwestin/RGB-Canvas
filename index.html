<!DOCTYPE html>
<!-- saved from url=(0026)http://karlwestin.com/rgb/ -->
<html lang="en" class="no-js"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title></title>
	<meta name="description" content="">
	<meta name="author" content="">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" href="http://karlwestin.com/favicon.ico">
	<link rel="apple-touch-icon" href="http://karlwestin.com/apple-touch-icon.png">
	<link rel="stylesheet" href="http://karlwestin.com/rgb/css/style.css?v=2">

	<!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>
<body>

  <div id="element">

  </div>
	<script src="./script.js"></script>
	
	<script>

     function calcOffset(offset) {
        return Math.round(sineWave(offset) * 50);
     }

	   window.onload = function() {
	       var x = new RGBCanvas("jpeg.jpeg");
      
	       var offset = 70, timeout = 50;
	       setTimeout(function animate() {
             offset += 1;
             var factor = sineWave(offset);
	           var v = x.transformRGB({
                                data: x.readPixels(), 
                                r: function(v) { return v },
                                rOffset: calcOffset(offset),
                                });
               x.ctx.putImageData(v, 0, 0);
               setTimeout(animate, timeout);
	       }, timeout);
	   };

 // Iterating functions

 function sineWave(wavepos) {
    // returns a value betwwen 0 and 1. "Starts" at 0.5
    // to start with 0, pass in 90
    return Math.sin(degToRad(wavepos))/2 + 0.5;

    function degToRad(v) {
      return Math.round((v * Math.PI/180) * 1000)/1000;
    }
 }
  </script>

</body></html>
